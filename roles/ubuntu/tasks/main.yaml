---
- name: Update
  shell: "sudo apt update"

- name: Install apt-transport-htps and software-properties-common
  shell: "sudo apt install -y apt-transport-https software-properties-common"

- name: sudo apt install net-tools
  shell: "sudo apt install net-tools"

- name: Add Docker's official GPG key
  shell: "curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -"

- name: Add Docker's official GPG key
  shell: "curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -"

- name: Add Docker's repository
  shell: 'sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"'

- name: Install Docker
  shell: "sudo apt update && sudo apt install -y docker-ce"

- name: Add user to docker group
  shell: "sudo usermod -aG docker $USER"

- name: "Install nginx"
  shell: "sudo apt install -y nginx"

- name: "Check status nginx"
  shell: "sudo systemctl status nginx"

- name: "Configure nginx"
  copy: "src=nginx.conf dest=/etc/nginx/sites-enabled"


- name: rm old containers
  shell: "docker rm -f $(docker ps -aq)"
  ignore_errors: yes

- name: Run project
  shell: "docker run -p 8080:8080 -d --name=udevs muhammadsiddiqbe/udevs"
